(window.webpackJsonp=window.webpackJsonp||[]).push([[1046],{1311:function(A,t){throw new Error("Module parse failed: Unexpected token (1:10)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n> {\"version\":3,\"file\":\"filter-entity.factory.js\",\"sources\":[\"../../../../../src/x-modules/facets/entities/filter-entity.factory.ts\"],\"sourcesContent\":[\"import { Facet, Filter, isFacetFilter } from '@empathyco/x-types';\\nimport { Store } from 'vuex';\\nimport { RootXStoreState } from '../../../store/store.types';\\nimport { EditableNumberRangeFilterEntity } from './editable-number-range-filter.entity';\\nimport { HierarchicalFilterEntity } from './hierarchical-filter.entity';\\nimport { NumberRangeFilterEntity } from './number-range-filter.entity';\\nimport { RawFilterEntity } from './raw-filter.entity';\\nimport { SimpleFilterEntity } from './simple-filter.entity';\\nimport { FilterEntity, FilterEntityConstructor, FilterEntityModifier } from './types';\\n\\n/**\\n * Creates {@link FilterEntity | FilterEntities} based on the provided configs.\\n *\\n * @internal\\n */\\nexport class FilterEntityFactory {\\n  /**\\n   * The public global instance of the Singleton.\\n   *\\n   * @remarks The constructor is not private, so it's possible to create more instances,\\n   * to simplify the testing.\\n   */\\n  public static instance = new FilterEntityFactory();\\n\\n  /**\\n   * The registered entities by default to be used by the Factory.\\n   */\\n  protected entities: FilterEntityConstructor[] = [\\n    SimpleFilterEntity,\\n    HierarchicalFilterEntity,\\n    NumberRangeFilterEntity,\\n    EditableNumberRangeFilterEntity,\\n    RawFilterEntity\\n  ];\\n\\n  /**\\n   * The registered modifiers grouped by the facetId to be applied.\\n   */\\n  protected modifiers: Record<Facet['id'], FilterEntityModifier[]> = {};\\n\\n  /**\\n   * Contains the instantiated entities for each facet.\\n   *\\n   * @internal\\n   */\\n  protected cache: Record<Facet['id'] | '__unknown-facet__', FilterEntity> = {};\\n\\n  /**\\n   * Creates a new FilterEntity from a filter.\\n   *\\n   * @param store - The {@link https://vuex.vuejs.org/guide/ | Vuex Store} that the entity will\\n   * use.\\n   * @param filter - The {@link @empathyco/x-types#Filter | Filter} necessary to know what\\n   * {@link FilterEntity} to create.\\n   * @returns The {@link FilterEntity} created by the factory.\\n   */\\n  getFilterEntity(store: Store<RootXStoreState>, filter: Filter): FilterEntity {\\n    const cacheKey = isFacetFilter(filter) ? filter.facetId : '__unknown-facet__';\\n    return this.cache[cacheKey] ?? (this.cache[cacheKey] = this.createFilterEntity(store, filter));\\n  }\\n\\n  /**\\n   * Creates a brand new {@link FilterEntity} for the given\\n   * {@link @empathyco/x-types#Filter | Filter}.\\n   *\\n   * @param store - The store which should be mutated through the entity.\\n   * @param filter - The filter to create the entity for.\\n   * @returns A new {@link FilterEntity} for the given {@link @empathyco/x-types#Filter | Filter}.\\n   * @internal\\n   */\\n  protected createFilterEntity(store: Store<RootXStoreState>, filter: Filter): FilterEntity {\\n    const filterEntityConstructor = this.entities.find(entity => entity.accepts(filter));\\n    if (!filterEntityConstructor) {\\n      throw new Error(`Entity configuration for ${filter.modelName} not registered.`);\\n    }\\n    const entity = new filterEntityConstructor(store);\\n    const modifiers = isFacetFilter(filter) ? this.modifiers[filter.facetId] ?? [] : [];\\n    return modifiers.reduce(\\n      (modifiedEntity, modifier) => new modifier(store, modifiedEntity),\\n      entity\\n    );\\n  }\\n\\n  /**\\n   * Registers a new {@link FilterEntity} to be used by the factory.\\n   *\\n   * @param entity - The new {@link FilterEntity} to be registered in the factory.\\n   */\\n  registerFilterEntity(entity: FilterEntityConstructor): void {\\n    if (!this.entities.includes(entity)) {\\n      this.entities.push(entity);\\n    }\\n  }\\n\\n  /**\\n   * Registers a list of modifiers to be used with the {@link FilterEntity | FilterEntities} of a\\n   * particular facet.\\n   *\\n   * @param facetId - The facet id whose Entities will be modified.\\n   * @param modifiers - The list of modifiers to be registered.\\n   */\\n  registerFilterModifier(facetId: Facet['id'], modifiers: FilterEntityModifier[]): void {\\n    if (!this.modifiers[facetId]) {\\n      this.modifiers[facetId] = [];\\n    }\\n    const facetModifiers = this.modifiers[facetId];\\n    const newModifiers = modifiers.filter(modifier => !facetModifiers.includes(modifier));\\n    facetModifiers.push(...newModifiers);\\n  }\\n}\\n\"],\"names\":[],\"mappings\":\";;;;;;;AAUA;;;;;;IAKA;;;;QAYY,aAAQ,GAA8B;YAC9C,kBAAkB;YAClB,wBAAwB;YACxB,uBAAuB;YACvB,+BAA+B;YAC/B,eAAe;SAChB,CAAC;;;;QAKQ,cAAS,GAAgD,EAAE,CAAC;;;;;;QAO5D,UAAK,GAA4D,EAAE,CAAC;KAgE/E;;;;;;;;;;IArDC,6CAAe,GAAf,UAAgB,KAA6B,EAAE,MAAc;;QAC3D,IAAM,QAAQ,GAAG,aAAa,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,mBAAmB,CAAC;QAC9E,OAAO,MAAA,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,oCAAK,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC;KAChG;;;;;;;;;;IAWS,gDAAkB,GAA5B,UAA6B,KAA6B,EAAE,MAAc;;QACxE,IAAM,uBAAuB,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,GAAA,CAAC,CAAC;QACrF,IAAI,CAAC,uBAAuB,EAAE;YAC5B,MAAM,IAAI,KAAK,CAAC,8BAA4B,MAAM,CAAC,SAAS,qBAAkB,CAAC,CAAC;SACjF;QACD,IAAM,MAAM,GAAG,IAAI,uBAAuB,CAAC,KAAK,CAAC,CAAC;QAClD,IAAM,SAAS,GAAG,aAAa,CAAC,MAAM,CAAC,GAAG,MAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,mCAAI,EAAE,GAAG,EAAE,CAAC;QACpF,OAAO,SAAS,CAAC,MAAM,CACrB,UAAC,cAAc,EAAE,QAAQ,IAAK,OAAA,IAAI,QAAQ,CAAC,KAAK,EAAE,cAAc,CAAC,GAAA,EACjE,MAAM,CACP,CAAC;KACH;;;;;;IAOD,kDAAoB,GAApB,UAAqB,MAA+B;QAClD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;YACnC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC5B;KACF;;;;;;;;IASD,oDAAsB,GAAtB,UAAuB,OAAoB,EAAE,SAAiC;QAC5E,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;YAC5B,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;SAC9B;QACD,IAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QAC/C,IAAM,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,UAAA,QAAQ,IAAI,OAAA,CAAC,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAA,CAAC,CAAC;QACtF,cAAc,CAAC,IAAI,OAAnB,cAAc,EAAS,YAAY,EAAE;KACtC;;;;;;;IAtFa,4BAAQ,GAAG,IAAI,mBAAmB,EAAE,CAAC;IAuFrD,0BAAC;CA9FD;;;;\"}")}}]);