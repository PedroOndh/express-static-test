(window.webpackJsonp=window.webpackJsonp||[]).push([[943],{1219:function(A,n){throw new Error("Module parse failed: Unexpected token (1:10)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n> {\"version\":3,\"file\":\"x-plugin.mixin.js\",\"sources\":[\"../../../src/plugins/x-plugin.mixin.ts\"],\"sourcesContent\":[\"import Vue, { ComponentOptions } from 'vue';\\nimport { Store } from 'vuex';\\nimport { getXComponentXModuleName, isXComponent } from '../components/x-component.utils';\\nimport { RootXStoreState } from '../store/store.types';\\nimport { XEvent, XEventPayload } from '../wiring/events.types';\\nimport { WireMetadata } from '../wiring/wiring.types';\\nimport { FeatureLocation } from '../types/origin';\\nimport { XModuleName } from '../x-modules/x-modules.types';\\nimport { XBus } from './x-bus.types';\\nimport { getAliasAPI } from './x-plugin.alias';\\nimport { XComponentAPI, XComponentBusAPI } from './x-plugin.types';\\n\\ndeclare module 'vue/types/vue' {\\n  export interface Vue {\\n    $x: XComponentAPI;\\n  }\\n}\\n\\ndeclare module 'vue/types/options' {\\n  export interface ComponentOptions<V, Data, Methods, Computed, PropsDef, Props> {\\n    xModule?: XModuleName;\\n  }\\n}\\n\\ninterface PrivateExtendedVueComponent extends Vue {\\n  $location?: FeatureLocation;\\n  $store: Store<{ x: Partial<RootXStoreState['x']> }>;\\n  xComponent: Vue | undefined;\\n}\\n\\n/**\\n * Vue global mixin that adds a `$x` object to every component with the {@link XComponentAPI}.\\n *\\n * @remarks It adds an injection property `origin` which value is included in the metadata of each\\n * event emitted with `$x.emit`.\\n *\\n * @param bus - The {@link XBus} to use inside the components for emitting events.\\n * @returns Mixin options which registers the component as X-Component and the $x.\\n * @internal\\n */\\nexport const createXComponentAPIMixin = (\\n  bus: XBus\\n): ComponentOptions<Vue> & ThisType<PrivateExtendedVueComponent> => ({\\n  inject: {\\n    $location: {\\n      from: 'location',\\n      default: undefined\\n    }\\n  },\\n  beforeCreate(this: PrivateExtendedVueComponent) {\\n    this.xComponent = getRootXComponent(this);\\n    const aliasAPI = getAliasAPI(this);\\n    const busAPI = getBusAPI(bus, this);\\n    this.$x = Object.assign(aliasAPI, busAPI);\\n  }\\n});\\n\\n/**\\n * Creates an object containing the API related to the {@link XBus}.\\n *\\n * @param bus - The global {@link XBus}.\\n * @param component - The component instance.\\n *\\n * @returns An object containing the {@link XComponentBusAPI}.\\n * @internal\\n */\\nexport function getBusAPI(bus: XBus, component: PrivateExtendedVueComponent): XComponentBusAPI {\\n  return {\\n    emit: <Event extends XEvent>(\\n      event: Event,\\n      payload?: XEventPayload<Event>,\\n      metadata: Omit<WireMetadata, 'moduleName'> = {}\\n    ) => {\\n      bus.emit(event, payload as any, createWireMetadata(component, metadata));\\n      component.xComponent?.$emit(event, payload);\\n    },\\n    on: bus.on.bind(bus)\\n  };\\n}\\n\\n/**\\n * Creates a wire metadata object based on the component and the provided metadata.\\n *\\n * @param component - The component this metadata belongs to.\\n * @param metadata - Additional metadata emitted by the component.\\n * @returns A {@link WireMetadata} object.\\n * @internal\\n */\\nfunction createWireMetadata(\\n  component: PrivateExtendedVueComponent,\\n  metadata: Partial<WireMetadata>\\n): WireMetadata {\\n  return {\\n    moduleName: getXComponentXModuleName(component.xComponent),\\n    location: component.$location,\\n    ...metadata\\n  };\\n}\\n\\n/**\\n * Given a component, finds the root XComponent in the ancestors hierarchy.\\n *\\n * @param component - The component to find its root XComponent.\\n * @returns The root XComponent or undefined if it has not.\\n * @public\\n */\\nexport function getRootXComponent(component: Vue): Vue | undefined {\\n  let xComponent: Vue | undefined;\\n  while (component !== undefined && component !== null) {\\n    if (isXComponent(component)) {\\n      xComponent = component;\\n    }\\n    component = component.$parent;\\n  }\\n  return xComponent;\\n}\\n\"],\"names\":[],\"mappings\":\";;;;AA8BA;;;;;;;;;;IAUa,wBAAwB,GAAG,UACtC,GAAS,IACyD,QAAC;IACnE,MAAM,EAAE;QACN,SAAS,EAAE;YACT,IAAI,EAAE,UAAU;YAChB,OAAO,EAAE,SAAS;SACnB;KACF;IACD,YAAY,EAAZ;QACE,IAAI,CAAC,UAAU,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAC1C,IAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;QACnC,IAAM,MAAM,GAAG,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;KAC3C;CACF,KAAE;AAEH;;;;;;;;;SASgB,SAAS,CAAC,GAAS,EAAE,SAAsC;IACzE,OAAO;QACL,IAAI,EAAE,UACJ,KAAY,EACZ,OAA8B,EAC9B,QAA+C;;YAA/C,yBAAA,EAAA,aAA+C;YAE/C,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,OAAc,EAAE,kBAAkB,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;YACzE,MAAA,SAAS,CAAC,UAAU,0CAAE,KAAK,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;SAC7C;QACD,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC;KACrB,CAAC;AACJ,CAAC;AAED;;;;;;;;AAQA,SAAS,kBAAkB,CACzB,SAAsC,EACtC,QAA+B;IAE/B,kBACE,UAAU,EAAE,wBAAwB,CAAC,SAAS,CAAC,UAAU,CAAC,EAC1D,QAAQ,EAAE,SAAS,CAAC,SAAS,IAC1B,QAAQ,EACX;AACJ,CAAC;AAED;;;;;;;SAOgB,iBAAiB,CAAC,SAAc;IAC9C,IAAI,UAA2B,CAAC;IAChC,OAAO,SAAS,KAAK,SAAS,IAAI,SAAS,KAAK,IAAI,EAAE;QACpD,IAAI,YAAY,CAAC,SAAS,CAAC,EAAE;YAC3B,UAAU,GAAG,SAAS,CAAC;SACxB;QACD,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC;KAC/B;IACD,OAAO,UAAU,CAAC;AACpB;;;;\"}")}}]);