(window.webpackJsonp=window.webpackJsonp||[]).push([[1047],{1312:function(A,e){throw new Error('Module parse failed: Unexpected token (1:10)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n> {"version":3,"file":"hierarchical-filter.entity.js","sources":["../../../../../src/x-modules/facets/entities/hierarchical-filter.entity.ts"],"sourcesContent":["import { HierarchicalFilter, isHierarchicalFilter } from \'@empathyco/x-types\';\\nimport { Store } from \'vuex\';\\nimport { RootXStoreState } from \'../../../store/store.types\';\\nimport { addFacetIfNotPresent } from \'./add-facet-if-not-present\';\\nimport { FilterEntity } from \'./types\';\\n\\n/**\\n * Allows selecting and deselecting a filter of {@link @empathyco/x-types#HierarchicalFilter\\n * | HierarchicalFilter}.\\n *\\n * @internal\\n */\\nexport class HierarchicalFilterEntity implements FilterEntity {\\n  public static accepts = isHierarchicalFilter;\\n\\n  public constructor(protected store: Store<RootXStoreState>) {}\\n\\n  /**\\n   * Deselects the hierarchical filter and all of its descendants.\\n   *\\n   * @param filter - The filter to deselect.\\n   */\\n  deselect(filter: HierarchicalFilter): void {\\n    this.saveFilter({ ...filter, selected: false });\\n    this.deselectDescendants(filter);\\n    addFacetIfNotPresent(this.store, filter.facetId, \'HierarchicalFacet\');\\n  }\\n\\n  /**\\n   * Selects the hierarchical filter and its ancestors.\\n   *\\n   * @param filter - The filter to select.\\n   */\\n  select(filter: HierarchicalFilter): void {\\n    this.saveFilter({ ...filter, selected: true });\\n    this.selectAncestors(filter);\\n    addFacetIfNotPresent(this.store, filter.facetId, \'HierarchicalFacet\');\\n  }\\n\\n  /**\\n   * Deselects all the descendants of the given filter, saving them to the store.\\n   *\\n   * @remarks The descendants hierarchy is retrieved from the store.\\n   * @param filter - The filter to deselect its descendants.\\n   * @internal\\n   */\\n  protected deselectDescendants(filter: HierarchicalFilter): void {\\n    if (filter.children) {\\n      filter.children.forEach(childId => {\\n        const child = this.getFilterById(childId);\\n        if (child) {\\n          this.saveFilter({ ...child, selected: false });\\n          this.deselectDescendants(child);\\n        }\\n      });\\n    }\\n  }\\n\\n  /**\\n   * Selects all the ancestors of the given filter, saving them to the store.\\n   *\\n   * @remarks The ancestors hierarchy is retrieved from the store.\\n   * @param filter - The filter to select its ancestors.\\n   * @internal\\n   */\\n  protected selectAncestors(filter: HierarchicalFilter): void {\\n    if (filter.parentId) {\\n      const parent = this.getFilterById(filter.parentId);\\n      if (parent) {\\n        this.saveFilter({ ...parent, selected: true });\\n        this.selectAncestors(parent);\\n      }\\n    }\\n  }\\n\\n  /**\\n   * Retrieves a hierarchical filter from the store by its id.\\n   *\\n   * @param id - The id of the filter to retrieve.\\n   * @returns The hierarchical filter retrieved from the store.\\n   * @internal\\n   */\\n  protected getFilterById(id: HierarchicalFilter[\'id\']): HierarchicalFilter {\\n    return this.store.state.x.facets.filters[id] as HierarchicalFilter;\\n  }\\n\\n  /**\\n   * Saves the given filter to the store.\\n   *\\n   * @param filter - The filter to save to the store.\\n   * @internal\\n   */\\n  protected saveFilter(filter: HierarchicalFilter): void {\\n    this.store.commit(\'x/facets/setFilter\', filter);\\n  }\\n}\\n"],"names":[],"mappings":";;;;AAMA;;;;;;;IASE,kCAA6B,KAA6B;QAA7B,UAAK,GAAL,KAAK,CAAwB;KAAI;;;;;;IAO9D,2CAAQ,GAAR,UAAS,MAA0B;QACjC,IAAI,CAAC,UAAU,uBAAM,MAAM,KAAE,QAAQ,EAAE,KAAK,IAAG,CAAC;QAChD,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;QACjC,oBAAoB,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAAC;KACvE;;;;;;IAOD,yCAAM,GAAN,UAAO,MAA0B;QAC/B,IAAI,CAAC,UAAU,uBAAM,MAAM,KAAE,QAAQ,EAAE,IAAI,IAAG,CAAC;QAC/C,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QAC7B,oBAAoB,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAAC;KACvE;;;;;;;;IASS,sDAAmB,GAA7B,UAA8B,MAA0B;QAAxD,iBAUC;QATC,IAAI,MAAM,CAAC,QAAQ,EAAE;YACnB,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO;gBAC7B,IAAM,KAAK,GAAG,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;gBAC1C,IAAI,KAAK,EAAE;oBACT,KAAI,CAAC,UAAU,uBAAM,KAAK,KAAE,QAAQ,EAAE,KAAK,IAAG,CAAC;oBAC/C,KAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;iBACjC;aACF,CAAC,CAAC;SACJ;KACF;;;;;;;;IASS,kDAAe,GAAzB,UAA0B,MAA0B;QAClD,IAAI,MAAM,CAAC,QAAQ,EAAE;YACnB,IAAM,QAAM,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACnD,IAAI,QAAM,EAAE;gBACV,IAAI,CAAC,UAAU,uBAAM,QAAM,KAAE,QAAQ,EAAE,IAAI,IAAG,CAAC;gBAC/C,IAAI,CAAC,eAAe,CAAC,QAAM,CAAC,CAAC;aAC9B;SACF;KACF;;;;;;;;IASS,gDAAa,GAAvB,UAAwB,EAA4B;QAClD,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAuB,CAAC;KACpE;;;;;;;IAQS,6CAAU,GAApB,UAAqB,MAA0B;QAC7C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;KACjD;IAjFa,gCAAO,GAAG,oBAAoB,CAAC;IAkF/C,+BAAC;CAnFD;;;;"}')}}]);